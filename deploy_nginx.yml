---
- hosts: localhost
  collections:
    - kubernetes.core
  tasks:
    - name: Install kubernetes library
      pip:
        name: kubernetes
        state: present  
    - name: Copy file with owner and permissions
      ansible.builtin.copy:
        src: /home/config
        dest: /home/confiig
    - name: Get Kubernetes cluster info
      kubernetes.core.k8s_info:
        kubeconfig: /home/confiig
    - name: Create a pod
      k8s:
        state: present
        definition:
          apiVersion: v1
          kind: Pod
          metadata:
            name: "nginx-pod"
            namespace: default
          spec:
            containers:
              - name: nginx-container
                image: nginx
